import{s as T,u as q,an as A,o,i as n,k as l,j as i,ag as L,ar as a,aG as H,c as t,d as k,t as r,a as I,F as B,f as Q,aj as w,w as M,ah as S,al as D}from"./index.5dab455f.js";import{u as N,a as R,Q as C,_ as U,b as x}from"./useBookmark.1ce185b5.js";import{Q as $}from"./QChip.7b90b6fa.js";import{g as j}from"./user.faff4df2.js";function F(e=new Date("2023-12-28")){const s=new Intl.RelativeTimeFormat("ko",{numeric:"auto"}),h=new Date,c=Math.abs(e-h),y=Math.floor(c/1e3),m=Math.floor(y/60),d=Math.floor(m/60),u=Math.floor(d/24),p=Math.floor(u/365);return p>0?s.format(-1*p,"year"):u>0?s.format(-1*u,"day"):d>0?s.format(-1*d,"hour"):m>0?s.format(-1*m,"minute"):s.format(-1*y,"second")}const P=["src"],V={class:"flex items-center"},E={key:1},G=t("span",{class:"q-mx-xs"},"\xB7",-1),O={class:"text-h6 q-mt-sm"},z={class:"text-indigo text-caption"},J={key:0,class:"text-grey-7 q-my-sm ellipsis-2-lines"},K={class:"row items-center"},W={class:"col-3"},X={class:"flex flex-center"},Y={class:"col-3"},Z={class:"flex flex-center"},ee={class:"col-3"},te={class:"flex flex-center"},se={class:"col-3"},oe={class:"flex flex-center"},ae={__name:"PostItem",props:{item:{type:Object,default:()=>({})},escapeHTML:{type:Boolean,default:!1}},setup(e){const s=e,h=f=>{if(f==="qna")return"Q&A";if(f==="community")return"\uCEE4\uBBA4\uB2C8\uD2F0";if(f==="notice")return"\uACF5\uC9C0\uC0AC\uD56D";if(f==="review")return"\uB9AC\uBDF0"};T(q());const{isLike:c,likeCount:y,toggleLike:m}=N(s.item.id,{likey:s.item.likeCount}),{isBookmark:d,bookmarkCount:u,toggleBookmark:p}=R(s.item.id,{bookmarking:s.item.bookmarkCount}),{state:b,isLoading:v}=A(()=>j(s.item.uid),{});return(f,ie)=>(o(),n(S,{class:"q-pt-md",clickable:"",to:`/posts/${e.item.id}`},{default:l(()=>[i(L,{avatar:"",top:""},{default:l(()=>[a(v)?(o(),n(C,{key:0,type:"QAvatar"})):(o(),n(H,{key:1},{default:l(()=>{var _;return[t("img",{src:(_=a(b))==null?void 0:_.photoURL,alt:""},null,8,P)]}),_:1}))]),_:1}),i(L,{class:"q-mr-xl",style:{"word-break":"break-all"}},{default:l(()=>{var _;return[t("div",V,[a(v)?(o(),n(C,{key:0,type:"rect",width:"40px"})):(o(),k("span",E,r((_=a(b))==null?void 0:_.displayName),1)),G,t("span",null,r(a(F)(e.item.createAt)),1),i($,{class:"q-ml-md",dense:"",color:"indigo","text-color":"white"},{default:l(()=>[I(r(h(e.item.category)),1)]),_:1})]),t("div",O,r(e.item.title),1),t("div",z,[(o(!0),k(B,null,Q(e.item.tags,g=>(o(),k("span",{key:g,class:"q-mr-sm"}," #"+r(g),1))),128))]),e.escapeHTML?(o(),k("div",J,r(e.item.content),1)):(o(),n(U,{key:1,content:e.item.content,class:"text-grey-6 q-my-sm ellipsis-2-lines"},null,8,["content"])),t("div",K,[t("div",W,[t("div",X,[i(x,{name:"sym_o_visibility",label:e.item.readCount,tooltip:"\uC870\uD68C\uC218"},null,8,["label"])])]),t("div",Y,[t("div",Z,[i(x,{name:"sym_o_sms",label:e.item.commentCount,tooltip:"\uB313\uAE00\uC218"},null,8,["label"])])]),t("div",ee,[t("div",te,[i(w,{class:"full-width",flat:"",dense:"",onClick:M(a(m),["prevent"])},{default:l(()=>[i(x,{color:"red",name:a(c)?"favorite":"sym_o_favorite",label:a(y),tooltip:"\uC88B\uC544\uC694"},null,8,["name","label"])]),_:1},8,["onClick"])])]),t("div",se,[t("div",oe,[i(w,{class:"full-width",flat:"",dense:"",onClick:M(a(p),["prevent"])},{default:l(()=>[i(x,{color:"indigo",name:a(d)?"bookmark":"sym_o_bookmark",label:a(u),tooltip:"\uBD81\uB9C8\uD06C"},null,8,["name","label"])]),_:1},8,["onClick"])])])])]}),_:1})]),_:1},8,["to"]))}},me={__name:"PostList",props:{items:Array,default:()=>[],escapeHTML:{type:Boolean,default:!1}},setup(e){return(s,h)=>(o(),n(D,{bordered:"",separator:""},{default:l(()=>[(o(!0),k(B,null,Q(e.items,c=>(o(),n(ae,{key:c.id,item:c,escapeHTML:e.escapeHTML},null,8,["item","escapeHTML"]))),128))]),_:1}))}};export{me as _};
