import{u as M,aC as F,aD as H,bt as I,a4 as b,an as h,o as t,i as o,k as l,c as n,j as e,aj as u,aR as C,ar as a,aG as E,d as p,t as m,al as G,ac as g,ah as x,ag as Q,a as q,bq as O,e as D,f as T,F as J,aq as K,ap as w}from"./index.5dab455f.js";import{u as W,a as X,Q as f,b as d,_ as Z}from"./useBookmark.1ce185b5.js";import{d as ee}from"./date.8d82b2d4.js";import{j as te,k as ae}from"./post.328ce0bc.js";import{_ as se}from"./BaseCard.4de4e8c2.js";import"./index.7afb556f.js";import"./user.faff4df2.js";const oe={class:"flex q-mb-md"},le={class:"flex items-center"},ne=["src"],ie={class:"q-ml-md"},re={key:1},ce={class:"text-grey-6"},ue={class:"q-mt-md text-h5 text-weight-bold"},me={class:"text-teal q-mt-md"},de={class:"row items-center q-gutter-x-md q-mt-md justify-end"},ge={__name:"PostDetails",setup(_e){const{hasOwnContent:L}=M(),c=F(),S=H(),B=I(),s=b({}),_=b({}),{error:ke,isLoading:k}=h(()=>te(c.params.id),{},{onSuccess:i=>{s.value=i.post,_.value=i.postUser,z(i.post.likeCount),Y(i.post.bookmarkCount)}}),{execute:$}=h(ae,null,{immediate:!1,onSuccess:()=>{B.notify("\uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),S.push("/")}}),P=async()=>{confirm("\uC0AD\uC81C\uD558\uC2DC\uACA0\uC5B4\uC694?")!==!1&&await $(0,c.params.id)},{isLike:A,likeCount:N,toggleLike:j,updateLikeCount:z}=W(c.params.id),{isBookmark:R,bookmarkCount:U,toggleBookmark:V,updatebookmarkCount:Y}=X(c.params.id);return(i,y)=>(t(),o(se,{class:"q-pa-lg"},{default:l(()=>{var v;return[n("div",oe,[e(u,{icon:"sym_o_arrow_back",flat:"",round:"",dense:"",color:"grey",size:"16px",onClick:y[0]||(y[0]=r=>i.$router.push("/"))}),e(C),e(u,{icon:a(A)?"favorite":"sym_o_favorite",flat:"",round:"",dense:"",color:"red",size:"16px",onClick:a(j)},null,8,["icon","onClick"]),e(u,{icon:a(R)?"bookmark":"sym_o_bookmark",flat:"",round:"",dense:"",color:"indigo",size:"16px",onClick:a(V)},null,8,["icon","onClick"])]),n("div",le,[a(k)?(t(),o(f,{key:0,type:"QAvatar"})):(t(),o(E,{key:1},{default:l(()=>{var r;return[n("img",{src:(r=_.value)==null?void 0:r.photoURL},null,8,ne)]}),_:1})),n("div",ie,[a(k)?(t(),o(f,{key:0,type:"rect",width:"40px"})):(t(),p("div",re,m((v=_.value)==null?void 0:v.displayName),1)),n("div",ce,m(a(ee).formatDate(s.value.createAt,"YYYY. MM. DD HH:mm:ss")),1)]),e(C),a(L)(s.value.uid)?(t(),o(u,{key:2,icon:"more_horiz",round:"",flat:""},{default:l(()=>[e(O,null,{default:l(()=>[e(G,{style:{"min-width":"100px"}},{default:l(()=>[g((t(),o(x,{clickable:"",to:`/posts/${i.$route.params.id}/edit`},{default:l(()=>[e(Q,null,{default:l(()=>[q("\uC218\uC815\uD558\uAE30")]),_:1})]),_:1},8,["to"])),[[w]]),g((t(),o(x,{clickable:"",onClick:P},{default:l(()=>[e(Q,null,{default:l(()=>[q("\uC0AD\uC81C\uD558\uAE30")]),_:1})]),_:1})),[[w]])]),_:1})]),_:1})]),_:1})):D("",!0)]),n("div",ue,m(s.value.title),1),n("div",me,[(t(!0),p(J,null,T(s.value.tags,r=>(t(),p("span",{key:r},"#"+m(r)+"\xA0\xA0",1))),128))]),n("div",de,[e(d,{name:"sym_o_visibility",label:s.value.readCount},null,8,["label"]),e(d,{name:"sym_o_sms",label:s.value.commentCount},null,8,["label"]),e(d,{name:"sym_o_favorite",label:a(N)},null,8,["label"]),e(d,{name:"sym_o_bookmark",label:a(U)},null,8,["label"])]),e(K,{class:"q-my-lg"}),a(k)?(t(),o(f,{key:0,type:"text"})):s.value.content?(t(),o(Z,{key:1,content:s.value.content},null,8,["content"])):D("",!0)]}),_:1}))}};export{ge as default};
